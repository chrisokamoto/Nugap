!function(r){r.extend(r.fn,{validateOnBlur:function(e,t){var a=r(this);return a.find("textarea,input,select").blur(function(){r(this).doValidate(e,t)}),a},showHelpOnFocus:function(e){e||(e="data-validation-help");var t=r(this);return t.find("textarea,input").each(function(){var t=r(this).attr(e);t&&r(this).focus(function(){var e=r(this);0==e.parent().find(".jquery_form_help").length&&e.after(r("<span />").addClass("jquery_form_help").text(t).hide().fadeIn())}).blur(function(){r(this).parent().find(".jquery_form_help").fadeOut("slow",function(){r(this).remove()})})}),t},doValidate:function(e,t,a){"undefined"==typeof a&&(a=!0);var n=r(this),i={ignore:[],validationRuleAttribute:"data-validation",validationErrorMsgAttribute:"data-validation-error-msg",errorElementClass:"error",borderColorOnError:"red",dateFormat:"yyyy-mm-dd"};t&&r.extend(i,t),e&&r.extend(jQueryFormUtils.LANG,e),e=jQueryFormUtils.LANG;var o=n.attr("type");if(null===jQueryFormUtils.defaultBorderColor&&"submit"!==o&&"checkbox"!==o&&"radio"!==o&&(jQueryFormUtils.defaultBorderColor=n.css("border-color")),n.removeClass(i.errorElementClass).parent().find(".jquery_form_error_message").remove(),""!==i.borderColorOnError&&n.css("border-color",jQueryFormUtils.defaultBorderColor),!jQueryFormUtils.ignoreInput(n.attr("name"),o,i)){var u=jQueryFormUtils.validateInput(n,e,i);u===!0?n.unbind("keyup"):(n.addClass(i.errorElementClass).parent().append('<span class="jquery_form_error_message">'+u+"</span>"),""!==i.borderColorOnError&&n.css("border-color",i.borderColorOnError),a&&n.bind("keyup",function(){r(this).doValidate(e,t,!1)}))}return r(this)},validate:function(e,t){var a={ignore:[],errorElementClass:"error",borderColorOnError:"red",errorMessageClass:"jquery_form_error_message",validationRuleAttribute:"data-validation",validationErrorMsgAttribute:"data-validation-error-msg",errorMessagePosition:"top",scrollToTopOnError:!0,dateFormat:"yyyy-mm-dd"};t&&r.extend(a,t),e&&r.extend(jQueryFormUtils.LANG,e),e=jQueryFormUtils.LANG;var n=function(r){jQuery.inArray(r,i)<0&&i.push(r)},i=[],o=[],u=r(this);u.find("input,textarea,select").each(function(){var t=r(this),l=t.attr("type");if(!jQueryFormUtils.ignoreInput(t.attr("name"),l,a))if("radio"===l){var s=t.attr(a.validationRuleAttribute);if("undefined"!=typeof s&&"required"===s){var d=t.attr("name"),m=!1;if(u.find("input[name="+d+"]").each(function(){return r(this).is(":checked")?(m=!0,!1):void 0}),!m){var f=t.attr(a.validationErrorMsgAttribute);t.attr("data-validation-current-error",f||e.requiredFields),i.push(f||e.requiredFields),o.push(t)}}}else{null===jQueryFormUtils.defaultBorderColor&&l&&(jQueryFormUtils.defaultBorderColor=r.trim(t.css("border-color")));var F=jQueryFormUtils.validateInput(t,e,a,u);F!==!0&&(o.push(t),t.attr("data-validation-current-error",F),n(F))}});var l=null===jQueryFormUtils.defaultBorderColor||jQueryFormUtils.defaultBorderColor.indexOf(" ")>-1&&-1==jQueryFormUtils.defaultBorderColor.indexOf("rgb")?"border":"border-color";if(u.find("input,textarea,select").css(l,jQueryFormUtils.defaultBorderColor).removeClass(a.errorElementClass),r("."+a.errorMessageClass.split(" ").join(".")).remove(),r(".jquery_form_error_message").remove(),o.length>0){for(var s=0;s<o.length;s++)""!==a.borderColorOnError&&o[s].css("border-color",a.borderColorOnError),o[s].addClass(a.errorElementClass);if("top"===a.errorMessagePosition){for(var d="<strong>"+e.errorTitle+"</strong>",s=0;s<i.length;s++)d+="<br />* "+i[s];u.children().eq(0).before('<div class="'+a.errorMessageClass+'">'+d+"</div>"),a.scrollToTopOnError&&r(window).scrollTop(u.offset().top-20)}else for(var s=0;s<o.length;s++){var m=o[s].parent(),f=m.find("span[class=jquery_form_error_message]");f.length>0?f.eq(0).text(o[s].attr("data-validation-current-error")):m.append('<span class="jquery_form_error_message">'+o[s].attr("data-validation-current-error")+"</span>")}return!1}return!0},restrictLength:function(r){return new jQueryFormUtils.lengthRestriction(this,r),this}})}(jQuery);var jQueryFormUtils={};jQueryFormUtils.defaultBorderColor=null,jQueryFormUtils.validateEmail=function(r){var e=/^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(e.test(r)){var t=r.split("@");if(2==t.length)return jQueryFormUtils.validateDomain(t[1])}return!1},jQueryFormUtils.validatePhoneNumber=function(r){var e=r.match(/\+/g),t=r.match(/-/g);return null!==e&&e.length>1||null!==t&&t.length>1?!1:null!==e&&0!==r.indexOf("+")?!1:(r=r.replace(/([-|\+])/g,""),r.length>8&&null===r.match(/[^0-9]/g))},jQueryFormUtils.validateSwedishMobileNumber=function(r){if(!jQueryFormUtils.validatePhoneNumber(r))return!1;r=r.replace(/[^0-9]/g,"");var e=r.substring(0,3);return 10!=r.length&&"467"!==e?!1:11!=r.length&&"467"===e?!1:/07[0-9{1}]/.test(e)||"467"===e&&"0"===r.substr(3,1)},jQueryFormUtils.validateUKVATNumber=function(r){if(r=r.replace(/[^0-9]/g,""),r.length<9)return!1;var e=!1,t=r.split(""),a=Number(t[7]+t[8]),n=t[0],i=t[1];if(0==n&&i>0)return!1;for(var o=0,u=0;7>u;u++)o+=t[u]*(8-u);for(var l=0,u=0,s=8;s>=2;s--)l+=t[u]*s,u++;for(;o>0;)o-=97;return o=Math.abs(o),a==o&&(e=!0),e||(o%=97,o>=55?o-=55:o+=42,o==a&&(e=!0)),e},jQueryFormUtils.validateBirthdate=function(r,e){var t=this.parseDate(r,e);if(!t)return!1;var a=new Date,n=a.getFullYear(),i=t[0],o=t[1],u=t[2];if(i===n){var l=a.getMonth()+1;if(o===l){var s=a.getDate();return s>=u}return l>o}return n>i&&i>n-124},jQueryFormUtils.ignoreInput=function(r,e,t){if("submit"===e||"button"===e)return!0;for(var a=0;a<t.ignore.length;a++)if(t.ignore[a]===r)return!0;return!1},jQueryFormUtils.parseDate=function(r,e){for(var t=e.replace(/[a-zA-Z]/gi,"").substring(0,1),a="^",n=e.split(t),i=0;i<n.length;i++)a+=(i>0?"\\"+t:"")+"(\\d{"+n[i].length+"})";a+="$";var o=r.match(new RegExp(a));if(null===o)return!1;var u=function(r,e,t){for(var a=0;a<e.length;a++)if(e[a].substring(0,1)===r)return jQueryFormUtils.parseDateInt(t[a+1]);return-1},l=u("m",n,o),s=u("d",n,o),d=u("y",n,o);return 2===l&&s>28&&(0!==d%4||0===d%100&&0!==d%400)||2===l&&s>29&&(0===d%4||0!==d%100&&0===d%400)||l>12||0===l?!1:this.isShortMonth(l)&&s>30||!this.isShortMonth(l)&&s>31||0===s?!1:[d,l,s]},jQueryFormUtils.parseDateInt=function(r){return 0===r.indexOf("0")&&(r=r.replace("0","")),parseInt(r,10)},jQueryFormUtils.validateSwedishSecurityNumber=function(r){if(!r.match(/^(\d{4})(\d{2})(\d{2})(\d{4})$/))return!1;var e=RegExp.$1,t=jQueryFormUtils.parseDateInt(RegExp.$2),a=jQueryFormUtils.parseDateInt(RegExp.$3),n=new Array(31,28,31,30,31,30,31,31,30,31,30,31);if((0===e%400||0===e%4&&0!==e%100)&&(n[1]=29),1>t||t>12||1>a||a>n[t-1])return!1;r=r.substring(2,r.length);for(var i="",o=0;o<r.length;o++)i+=((o+1)%2+1)*r.substring(o,o+1);var u=0;for(o=0;o<i.length;o++)u+=parseInt(i.substring(o,o+1),10);return 0===u%10},jQueryFormUtils.validateTime=function(r){if(null===r.match(/^(\d{2}):(\d{2})$/))return!1;var e=parseInt(r.split(":")[0],10),t=parseInt(r.split(":")[1],10);return e>24||t>59||24===e&&t>0?!1:!0},jQueryFormUtils.validateFloat=function(r){return null!==r.match(/^(\-|)([0-9]+)\.([0-9]+)$/)},jQueryFormUtils.validateInteger=function(r){return""!==r&&""===r.replace(/[0-9]/g,"")},jQueryFormUtils.isShortMonth=function(r){return 0===r%2&&7>r||0!==r%2&&r>7},jQueryFormUtils.simpleSpamCheck=function(r,e){var t=e.match(/captcha([0-9a-z]+)/i)[1].replace("captcha","");return r===t},jQueryFormUtils.validateDomain=function(r){r=r.replace("ftp://","").replace("https://","").replace("http://","").replace("www.","");for(var e=new Array(".com",".net",".org",".biz",".coop",".info",".museum",".name",".pro",".edu",".gov",".int",".mil",".ac",".ad",".ae",".af",".ag",".ai",".al",".am",".an",".ao",".aq",".ar",".as",".at",".au",".aw",".az",".ba",".bb",".bd",".be",".bf",".bg",".bh",".bi",".bj",".bm",".bn",".bo",".br",".bs",".bt",".bv",".bw",".by",".bz",".ca",".cc",".cd",".cf",".cg",".ch",".ci",".ck",".cl",".cm",".cn",".co",".cr",".cu",".cv",".cx",".cy",".cz",".de",".dj",".dk",".dm",".do",".dz",".ec",".ee",".eg",".eh",".er",".es",".et",".fi",".fj",".fk",".fm",".fo",".fr",".ga",".gd",".ge",".gf",".gg",".gh",".gi",".gl",".gm",".gn",".gp",".gq",".gr",".gs",".gt",".gu",".gv",".gy",".hk",".hm",".hn",".hr",".ht",".hu",".id",".ie",".il",".im",".in",".io",".iq",".ir",".is",".it",".je",".jm",".jo",".jp",".ke",".kg",".kh",".ki",".km",".kn",".kp",".kr",".kw",".ky",".kz",".la",".lb",".lc",".li",".lk",".lr",".ls",".lt",".lu",".lv",".ly",".ma",".mc",".md",".mg",".mh",".mk",".ml",".mm",".mn",".mo",".mp",".mq",".mr",".ms",".mt",".mu",".mv",".mw",".mx",".my",".mz",".na",".nc",".ne",".nf",".ng",".ni",".nl",".no",".np",".nr",".nu",".nz",".om",".pa",".pe",".pf",".pg",".ph",".pk",".pl",".pm",".pn",".pr",".ps",".pt",".pw",".py",".qa",".re",".ro",".rw",".ru",".sa",".sb",".sc",".sd",".se",".sg",".sh",".si",".sj",".sk",".sl",".sm",".sn",".so",".sr",".st",".sv",".sy",".sz",".tc",".td",".tf",".tg",".th",".tj",".tk",".tm",".tn",".to",".tp",".tr",".tt",".tv",".tw",".tz",".ua",".ug",".uk",".um",".us",".uy",".uz",".va",".vc",".ve",".vg",".vi",".vn",".vu",".ws",".wf",".ye",".yt",".yu",".za",".zm",".zw",".mobi",".xxx"),t=r.lastIndexOf("."),a=r.substring(0,t),n=r.substring(t,r.length),i=!1,o=0;o<e.length;o++)if(e[o]===n){if(".uk"!==n){i=!0;break}for(var u=r.split("."),l=u[u.length-2],s=new Array("co","me","ac","gov","judiciary","ltd","mod","net","nhs","nic","org","parliament","plc","police","sch","bl","british-library","jet","nls"),d=0;d<s.length;d++)if(s[d]===l){i=!0;break}}if(!i)return!1;if(2>t||t>57)return!1;var m=a.substring(0,1),f=a.substring(a.length-1,a.length);return"-"===m||"."===m||"-"===f||"."===f?!1:a.split(".").length>3||a.split("..").length>1?!1:""!==a.replace(/[0-9a-z\.\-]/g,"")?!1:!0},jQueryFormUtils.attrInt=function(r,e){var t=new RegExp("("+e+"[0-9-]+)","g");return r.match(t)[0].replace(/[^0-9\-]/g,"")},jQueryFormUtils.validateInput=function(r,e,t,a){var n=r.val();if(n=n||"",n instanceof Array||(n=[n]),"SELECT"==r.get(0).nodeName&&r.attr("multiple")){var i=r.attr(t.validationRuleAttribute),o=r.attr(t.validationErrorMsgAttribute);if(i.indexOf("validate_num_answers")>-1){var u=jQueryFormUtils.attrInt(i,"num");if(u>n.length)return o||e.badNumberOfSelectedOptionsStart+u+e.badNumberOfSelectedOptionsEnd}}for(var l=0;l<n.length;l++){var s=jQueryFormUtils.validate(n[l],r,e,t,a);if(s!==!0)return s}return!0},jQueryFormUtils.validate=function(r,e,t,a,n){var i=e.attr("data-validation-optional"),o=!1,u=!1,l=e.attr("data-validation-if-checked");if(null!=l){o=!0,n||(n=e.closest("form"));var s=n.find('input[name="'+l+'"]');s.prop("checked")&&(u=!0)}if(!r&&"true"===i||o&&!u)return!0;var d=e.attr(a.validationRuleAttribute),m=e.attr(a.validationErrorMsgAttribute);if("undefined"!=typeof d&&null!==d){if(d.indexOf("required")>-1&&""===r)return m||t.requiredFields;if(d.indexOf("validate_min_length")>-1&&r.length<jQueryFormUtils.attrInt(d,"length"))return m||t.tooShortStart+jQueryFormUtils.attrInt(d,"length")+t.tooShortEnd;if(d.indexOf("validate_max_length")>-1&&r.length>jQueryFormUtils.attrInt(d,"length"))return m||t.tooLongStart+jQueryFormUtils.attrInt(d,"length")+t.tooLongEnd;if(d.indexOf("validate_length")>-1){var f=jQueryFormUtils.attrInt(d,"length").split("-");if(r.length<parseInt(f[0],10)||r.length>parseInt(f[1],10))return m||t.badLength+jQueryFormUtils.attrInt(d,"length")+t.tooLongEnd}if(d.indexOf("validate_email")>-1&&!jQueryFormUtils.validateEmail(r))return m||t.badEmail;if(d.indexOf("validate_domain")>-1&&!jQueryFormUtils.validateDomain(r))return m||t.badDomain;if(d.indexOf("validate_url")>-1&&!jQueryFormUtils.validateUrl(r))return m||t.badUrl;if(d.indexOf("validate_float")>-1&&!jQueryFormUtils.validateFloat(r))return m||t.badFloat;if(d.indexOf("validate_int")>-1&&!jQueryFormUtils.validateInteger(r))return m||t.badInt;if(d.indexOf("validate_time")>-1&&!jQueryFormUtils.validateTime(r))return m||t.badTime;if(d.indexOf("validate_date")>-1&&!jQueryFormUtils.parseDate(r,a.dateFormat))return m||t.badDate;if(d.indexOf("validate_birthdate")>-1&&!jQueryFormUtils.validateBirthdate(r,a.dateFormat))return m||t.badDate;if(d.indexOf("validate_phone")>-1&&!jQueryFormUtils.validatePhoneNumber(r))return m||t.badTelephone;if(d.indexOf("validate_swemobile")>-1&&!jQueryFormUtils.validateSwedishMobileNumber(r))return m||t.badTelephone;if(d.indexOf("validate_spamcheck")>-1&&!jQueryFormUtils.simpleSpamCheck(r,d))return m||t.badSecurityAnswer;if(d.indexOf("validate_ukvatnumber")>-1&&!jQueryFormUtils.validateUKVATNumber(r))return m||t.badUKVatAnswer;if(d.indexOf("validate_custom")>-1&&d.indexOf("regexp/")>-1){var F=new RegExp(d.split("regexp/")[1].split("/")[0]);if(!F.test(r))return m||t.badCustomVal}if(d.indexOf("validate_swesc")>-1&&!jQueryFormUtils.validateSwedishSecurityNumber(r))return m||t.badSecurityNumber;if(d.indexOf("validate_confirmation")>-1&&"undefined"!=typeof n){var c="",v=n.find("input[name="+e.attr("name")+"_confirmation]").eq(0);if(v&&(c=v.val()),r!==c)return m||t.notConfirmed}}return!0},jQueryFormUtils.LANG={errorTitle:"Form submission failed!",requiredFields:"You have not answered all required fields",badTime:"You have not given a correct time",badEmail:"You have not given a correct e-mail address",badTelephone:"You have not given a correct phone number",badSecurityAnswer:"You have not given a correct answer to the security question",badDate:"You have not given a correct date",tooLongStart:"You have given an answer longer than ",tooLongEnd:" characters",tooShortStart:"You have given an answer shorter than ",tooShortEnd:" characters",badLength:"You have to give an answer between ",notConfirmed:"Values could not be confirmed",badDomain:"Incorrect domain value",badUrl:"Incorrect url value",badFloat:"Incorrect float value",badCustomVal:"You gave an incorrect answer",badInt:"Incorrect integer value",badSecurityNumber:"Your social security number was incorrect",badUKVatAnswer:"Incorrect UK VAT Number",badNumberOfSelectedOptionsStart:"You have to choose at least ",badNumberOfSelectedOptionsEnd:" answers"},jQueryFormUtils.validateUrl=function(r){var e=/^(https|http|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|\[|\]|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;if(e.test(r)){var t=r.split(/^https|^http|^ftp/i)[1].replace("://",""),a=t.indexOf("/");return a>-1&&(t=t.substr(0,a)),jQueryFormUtils.validateDomain(t)}return!1},jQueryFormUtils.lengthRestriction=function(r,e){this.input=r,this.maxLength=parseInt(e.text(),10);var t=this;$(this.input).keyup(function(){$(this).val($(this).val().substring(0,t.maxLength)),e.text(t.maxLength-$(this).val().length)}).focus(function(){$(this).keyup()}).trigger("keyup")};